### 渗透测试思路？
（1）确定资产范围
ip、域名、内外网、测试账户,客户的需求，比如需要拿到内网的权限，有些客户不允许进内网

（2）信息收集
利用搜索引擎开放搜索，各种工具探测子域名、端口、应用、指纹、操作系统、版本、中间件、人员信息、waf 等

（3）漏洞探测
对目标的端口，web 服务进行目录扫描，探测 poc、常规的 checklist 逻辑漏洞测试

（4） 绕 waf
绕 waf 进行漏洞利用( 1 注释替换空格 2 字符集绕过 3 chunked 绕过 4 上传请求 multipart 绕过 5.参数污染 6.垃圾数据污染)

（5）内网入侵，横向敏感目标，清理痕迹

（6）提权
    windows:
    1.systminfo 根据系统补丁提权 
    2.第三方服务提权 
    3.数据库提权
    linux:
    1.利用系统内核漏洞进行提权 
    2.泄漏密码提权 
    3.sudo 提权 
    4.SUID 提权

### 扫描端口遇到端口全部开放的情况怎么办?
一般是CDN 或者防火墙导致的

判断CDN
    1.直接基于CNAME判断
    2.多地ping

如果是CDN，尝试寻找真实IP：
    1.子域名
    2.利用漏洞
    3.历史DNS记录
    4.邮件源码
    5.国外请求
    6.查询Https证书

### 泛解析的域名如何爆破？
首先的访问一个随机并不存在的域名test.xx.com，记录其泛解析到的IP地址。
然后通过字典或者自定义规则的方式枚举域名的A记录，并与最开始的test.xx.com的A记录做对比，不同的则是存在的域名

### fastjson 各个版本漏洞说一下

（1）Fastjson 是 Alibaba 开发的 Java 语言编写的高性能 JSON 库

（2）攻击者准备 rmi 服务和 web 服务，将 rmi 绝对路径注入到 lookup 方法中，受害者 JNDI 接口会指向攻击者控制 rmi 服务器，JNDI 接口向攻击者控制 web 服务器远程加载恶意代码，执行构造函数形成 RCE

（3）fastjson 漏洞历史

1.fastjson-1.2.24

(fastjson 接受的 JSON 可以通过艾特 type 字段来指定该 JSON 应当还原成何种类型的对象，在反序列化的时候方便操作)

2.fastjson-1.248 以下

(checkAutoType 中使用 TypeUtils.getClassFromMapping(typeName)去获取 class 不为空，从而绕过了黑名单检测)

3.fastjson-1.2.60 以下

(在此版本以下，字符串中包含\x 转义字符时可以造成 dos 漏洞)

### sqlmap 时间盲注参数
--time-sec  设置时间盲注延迟

### xss 在 a 标签怎么利用？
javascript伪协议
<a href="javascript:alert(/test/)">xss</a>

### 存在注入然后数据库没有数据怎么办？
（1）尝试写WebShell
root权限
GPC关闭（能使用单引号），magic_quotes_gpc=On
有绝对路径（读文件可以不用，写文件必须）
没有配置–secure-file-priv
成功条件：有读写的权限，有create、insert、select的权限
